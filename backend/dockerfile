# backend/Dockerfile
FROM node:20

# Instala pnpm globalmente
RUN npm install -g pnpm

WORKDIR /app

# Copia apenas os manifests primeiro (para melhor cache das dependências)
COPY package.json pnpm-lock.yaml* ./

# Instala dependências (sem instalar dev se for produção)
RUN pnpm install --frozen-lockfile

# Copia o restante do código
COPY . .

EXPOSE 3000

# Usa o script definido no package.json
CMD ["pnpm", "dev"]
